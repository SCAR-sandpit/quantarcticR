<!DOCTYPE html>
<!-- Generated by pkgdown: do not edit by hand --><html lang="en">
<head>
<meta http-equiv="Content-Type" content="text/html; charset=UTF-8">
<meta charset="utf-8">
<meta http-equiv="X-UA-Compatible" content="IE=edge">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>Introduction to quantarticR • quantarcticR</title>
<!-- jquery --><script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.4.1/jquery.min.js" integrity="sha256-CSXorXvZcTkaix6Yvo6HppcZGetbYMGWSFlBw8HfCJo=" crossorigin="anonymous"></script><!-- Bootstrap --><link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/twitter-bootstrap/3.4.1/css/bootstrap.min.css" integrity="sha256-bZLfwXAP04zRMK2BjiO8iu9pf4FbLqX6zitd+tIvLhE=" crossorigin="anonymous">
<script src="https://cdnjs.cloudflare.com/ajax/libs/twitter-bootstrap/3.4.1/js/bootstrap.min.js" integrity="sha256-nuL8/2cJ5NDSSwnKD8VqreErSWHtnEP9E7AySL+1ev4=" crossorigin="anonymous"></script><!-- bootstrap-toc --><link rel="stylesheet" href="../bootstrap-toc.css">
<script src="../bootstrap-toc.js"></script><!-- Font Awesome icons --><link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.12.1/css/all.min.css" integrity="sha256-mmgLkCYLUQbXn0B1SRqzHar6dCnv9oZFPEC1g1cwlkk=" crossorigin="anonymous">
<link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.12.1/css/v4-shims.min.css" integrity="sha256-wZjR52fzng1pJHwx4aV2AO3yyTOXrcDW7jBpJtTwVxw=" crossorigin="anonymous">
<!-- clipboard.js --><script src="https://cdnjs.cloudflare.com/ajax/libs/clipboard.js/2.0.6/clipboard.min.js" integrity="sha256-inc5kl9MA1hkeYUt+EC3BhlIgyp/2jDIyBLS6k3UxPI=" crossorigin="anonymous"></script><!-- headroom.js --><script src="https://cdnjs.cloudflare.com/ajax/libs/headroom/0.11.0/headroom.min.js" integrity="sha256-AsUX4SJE1+yuDu5+mAVzJbuYNPHj/WroHuZ8Ir/CkE0=" crossorigin="anonymous"></script><script src="https://cdnjs.cloudflare.com/ajax/libs/headroom/0.11.0/jQuery.headroom.min.js" integrity="sha256-ZX/yNShbjqsohH1k95liqY9Gd8uOiE1S4vZc+9KQ1K4=" crossorigin="anonymous"></script><!-- pkgdown --><link href="../pkgdown.css" rel="stylesheet">
<script src="../pkgdown.js"></script><meta property="og:title" content="Introduction to quantarticR">
<meta property="og:description" content="quantarcticR">
<!-- mathjax --><script src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.5/MathJax.js" integrity="sha256-nvJJv9wWKEm88qvoQl9ekL2J+k/RWIsaSScxxlsrv8k=" crossorigin="anonymous"></script><script src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.5/config/TeX-AMS-MML_HTMLorMML.js" integrity="sha256-84DKXVJXs0/F8OTMzX4UR909+jtl4G7SPypPavF+GfA=" crossorigin="anonymous"></script><!--[if lt IE 9]>
<script src="https://oss.maxcdn.com/html5shiv/3.7.3/html5shiv.min.js"></script>
<script src="https://oss.maxcdn.com/respond/1.4.2/respond.min.js"></script>
<![endif]-->
</head>
<body data-spy="scroll" data-target="#toc">
    <div class="container template-article">
      <header><div class="navbar navbar-default navbar-fixed-top" role="navigation">
  <div class="container">
    <div class="navbar-header">
      <button type="button" class="navbar-toggle collapsed" data-toggle="collapse" data-target="#navbar" aria-expanded="false">
        <span class="sr-only">Toggle navigation</span>
        <span class="icon-bar"></span>
        <span class="icon-bar"></span>
        <span class="icon-bar"></span>
      </button>
      <span class="navbar-brand">
        <a class="navbar-link" href="../index.html">quantarcticR</a>
        <span class="version label label-default" data-toggle="tooltip" data-placement="bottom" title="Released version">0.0.2</span>
      </span>
    </div>

    <div id="navbar" class="navbar-collapse collapse">
      <ul class="nav navbar-nav">
<li>
  <a href="../index.html">
    <span class="fas fa fas fa-home fa-lg"></span>
     
  </a>
</li>
<li>
  <a href="../reference/index.html">Reference</a>
</li>
<li class="dropdown">
  <a href="#" class="dropdown-toggle" data-toggle="dropdown" role="button" aria-expanded="false">
    Articles
     
    <span class="caret"></span>
  </a>
  <ul class="dropdown-menu" role="menu">
<li>
      <a href="../articles/intro.html">Introduction to quantarticR</a>
    </li>
  </ul>
</li>
<li>
  <a href="../news/index.html">Changelog</a>
</li>
      </ul>
<ul class="nav navbar-nav navbar-right"></ul>
</div>
<!--/.nav-collapse -->
  </div>
<!--/.container -->
</div>
<!--/.navbar -->

      

      </header><script src="intro_files/accessible-code-block-0.0.1/empty-anchor.js"></script><div class="row">
  <div class="col-md-9 contents">
    <div class="page-header toc-ignore">
      <h1 data-toc-skip>Introduction to quantarticR</h1>
            
      
      
      <div class="hidden name"><code>intro.Rmd</code></div>

    </div>

    
    
<div id="overview" class="section level1">
<h1 class="hasAnchor">
<a href="#overview" class="anchor"></a>Overview</h1>
<p>The <code>quantarcticR</code> package provides access to Quantarctica data sets for R users, <strong>without</strong> needing QGIS to be installed.</p>
<p>This vignette:</p>
<ul>
<li>explains what Quantarctica data is</li>
<li>shows how the datasets can be used in R</li>
<li>provides examples of how you can work with them</li>
</ul>
</div>
<div id="what-is-quantarctica" class="section level1">
<h1 class="hasAnchor">
<a href="#what-is-quantarctica" class="anchor"></a>What is Quantarctica?</h1>
<p><a href="http://quantarctica.npolar.no/about.html">Quantarctica</a> is a collection of Antarctic geographical datasets which works with the free, cross-platform, open-source software QGIS. It includes community-contributed, peer-reviewed data from ten different scientific themes and a professionally-designed basemap.</p>
<p>Quantarctica is is published and made available under <a href="https://creativecommons.org/licenses/by/4.0/">under a Creative Commons Attribution 4.0 International License</a>.</p>
<p>If you use it, please cite it:</p>
<p>Matsuoka K, Skoglund A, Roth G (2018) Quantarctica <code>dataset</code>. Norwegian Polar Institute. <a href="https://doi.org/10.21334/npolar.2018.8516e961" class="uri">https://doi.org/10.21334/npolar.2018.8516e961</a></p>
<p>In addition, published works produced using Quantarctica are asked to cite each dataset that was used in the work. Please consult the abstract of each data set for the relevant citation.</p>
</div>
<div id="caching-datasets" class="section level1">
<h1 class="hasAnchor">
<a href="#caching-datasets" class="anchor"></a>Caching datasets</h1>
<p>The <a href="https://github.com/SCAR-sandpit/quantarcticR">quantarcticR</a> R package provides you with flexibility to either temporarily or persistently store the data that is downloaded from Quantarctica. By default a temporary directory is used, which will only persist for the current R session. This means that data will not be re-used from session to session, and you may end up re-downloading the same data if you run the same script in different sessions.</p>
<p>You can instead choose to save the data to a persistent directory, by issuing the command <code><a href="../reference/qa_cache_dir.html">qa_cache_dir("persistent")</a></code> after loading the <code>quantarcticR</code> package. This will use a standard user data directory (e.g. under the user’s <code>AppData</code> directory on Windows operating systems). You could also specify a particular directory to use, if you prefer:</p>
<pre><code><a href="../reference/qa_cache_dir.html">qa_cache_dir("c:/my/data/directory/")</a></code></pre>
<p>You can switch cache directories at any time, and you can find out the current cache directory by calling <code><a href="../reference/qa_cache_dir.html">qa_cache_dir()</a></code> with no arguments.</p>
</div>
<div id="quantarctica-data-sets" class="section level1">
<h1 class="hasAnchor">
<a href="#quantarctica-data-sets" class="anchor"></a>Quantarctica Data Sets</h1>
<p>Start by loading the package:</p>
<div class="sourceCode" id="cb2"><html><body><pre class="r"><span class="fu"><a href="https://rdrr.io/r/base/library.html">library</a></span>(<span class="no">quantarcticR</span>)</pre></body></html></div>
<p>In order to return a list of the datasets available, use the <code>qa_datasets</code> function.</p>
<div class="sourceCode" id="cb3"><html><body><pre class="r"><span class="no">datasets</span> <span class="kw">&lt;-</span> <span class="fu"><a href="../reference/qa_datasets.html">qa_datasets</a></span>()
<span class="fu"><a href="https://rdrr.io/r/utils/head.html">head</a></span>(<span class="no">datasets</span>)</pre></body></html></div>
<pre><code>## # A tibble: 6 x 5
##   layername          main_file                       type   cached download_size
##   &lt;chr&gt;              &lt;chr&gt;                           &lt;chr&gt;  &lt;lgl&gt;    &lt;fs::bytes&gt;
## 1 Overview place na~ c:/data/Quantarctica3/Miscella~ shape~ TRUE          19.74K
## 2 COMNAP listed fac~ c:/data/Quantarctica3/Miscella~ shape~ TRUE         691.92K
## 3 Subantarctic stat~ c:/data/Quantarctica3/Miscella~ shape~ TRUE         691.92K
## 4 SCAR Composite ga~ c:/data/Quantarctica3/Miscella~ shape~ TRUE         329.05M
## 5 IBO-IOC GEBCO Fea~ c:/data/Quantarctica3/Miscella~ shape~ TRUE           1.25M
## 6 IBO-IOC GEBCO Fea~ c:/data/Quantarctica3/Miscella~ shape~ TRUE           1.25M</code></pre>
<p>In the <code>datasets</code> object we can see the following:</p>
<ul>
<li>
<code>layername</code> which is the name of the dataset</li>
<li>
<code>main_file</code> is the primary data file associated with each dataset</li>
<li>
<code>type</code> which is the object type (currently “shapefile” or “raster”)</li>
<li>
<code>cached</code> whether it has been downloaded to the local cache or not</li>
<li>
<code>download_size</code> which is the size of the dataset.</li>
</ul>
</div>
<div id="dataset-details" class="section level1">
<h1 class="hasAnchor">
<a href="#dataset-details" class="anchor"></a>Dataset details</h1>
<p>In order to view the details of a dataset use the <code>qa_dataset</code> function. This function gives more information about the dataset (but does not download or return the actual data). For example, with the simple basemap called “ADD Simple basemap”:</p>
<div class="sourceCode" id="cb5"><html><body><pre class="r"><span class="no">basemap</span> <span class="kw">&lt;-</span> <span class="fu"><a href="../reference/qa_dataset.html">qa_dataset</a></span>(<span class="st">"ADD Simple basemap"</span>)
<span class="no">basemap</span></pre></body></html></div>
<pre><code>## Rows: 1
## Columns: 12
## $ layername        &lt;chr&gt; "ADD Simple basemap"
## $ datasource       &lt;chr&gt; "Miscellaneous/SimpleBasemap/ADD_DerivedLowresBase...
## $ layer_attributes &lt;list&gt; [NULL]
## $ srs_attributes   &lt;list&gt; [&lt;tbl_df[1 x 4]&gt;]
## $ provider         &lt;chr&gt; "ogr"
## $ abstract         &lt;chr&gt; "Quantarctica project team compilation of ADD low ...
## $ extent           &lt;list&gt; [NULL]
## $ palette          &lt;list&gt; [NULL]
## $ type             &lt;chr&gt; "shapefile"
## $ download_size    &lt;fs::bytes&gt; 2M
## $ main_file        &lt;chr&gt; "c:/data/Quantarctica3/Miscellaneous/SimpleBasemap...
## $ bb_source        &lt;tibble&gt; &lt;tbl_df[1 x 16]&gt;</code></pre>
</div>
<div id="fetch-a-dataset" class="section level1">
<h1 class="hasAnchor">
<a href="#fetch-a-dataset" class="anchor"></a>Fetch a dataset</h1>
<p>To actually fetch the data, use the <code>qa_get</code> function. You can provide it with either the name of the dataset (i.e. <code>layername</code> as returned by <code><a href="../reference/qa_datasets.html">qa_datasets()</a></code>) or the dataset object (as returned by <code><a href="../reference/qa_dataset.html">qa_dataset()</a></code>).</p>
<p>Here we’ll fetch a dataset called “AntGG Free-air gravity anomaly (10km)”.</p>
<div class="sourceCode" id="cb7"><html><body><pre class="r"><span class="no">ga_info</span> <span class="kw">&lt;-</span> <span class="fu"><a href="../reference/qa_dataset.html">qa_dataset</a></span>(<span class="st">"AntGG Free-air gravity anomaly (10km)"</span>) <span class="co">## the dataset info</span>
<span class="no">ga_data</span> <span class="kw">&lt;-</span> <span class="fu"><a href="../reference/qa_get.html">qa_get</a></span>(<span class="no">ga_info</span>, <span class="kw">verbose</span> <span class="kw">=</span> <span class="fl">TRUE</span>) <span class="co">## fetch the actual data</span></pre></body></html></div>
<pre><code>## 
## Fri Sep 04 04:41:32 2020
## Synchronizing dataset: AntGG Free-air gravity anomaly (10km)
## Source URL http://quantarctica.tpac.org.au/Quantarctica3/Geophysics/ANTGG/
## --------------------------------------------------------------------------------------------
## 
##  this dataset path is: C:\data\Quantarctica3/Geophysics//ANTGG
##  visiting http://quantarctica.tpac.org.au/Quantarctica3/Geophysics/ANTGG/ ... done.
##  file already exists, not downloading: http://quantarctica.tpac.org.au/Quantarctica3/Geophysics/ANTGG/ANTGG_FreeAirGravityAnomaly_10km.tif ...  file already exists, not downloading: http://quantarctica.tpac.org.au/Quantarctica3/Geophysics/ANTGG/ANTGG_FreeAirGravityAnomaly_10km.tif.aux.xml ... 
## Fri Sep 04 04:41:33 2020 dataset synchronization complete: AntGG Free-air gravity anomaly (10km)</code></pre>
<div class="sourceCode" id="cb9"><html><body><pre class="r"><span class="fu"><a href="https://rdrr.io/r/base/class.html">class</a></span>(<span class="no">ga_data</span>)</pre></body></html></div>
<pre><code>## [1] "RasterLayer"
## attr(,"package")
## [1] "raster"</code></pre>
</div>
<div id="raster-plot" class="section level1">
<h1 class="hasAnchor">
<a href="#raster-plot" class="anchor"></a>Raster Plot</h1>
<p>The gravity anomaly data set is a raster, so we can use the raster package to plot it.</p>
<div class="sourceCode" id="cb11"><html><body><pre class="r"><span class="fu"><a href="https://rdrr.io/r/base/library.html">library</a></span>(<span class="no">raster</span>)
<span class="fu"><a href="https://rdrr.io/pkg/raster/man/plot.html">plot</a></span>(<span class="no">ga_data</span>)</pre></body></html></div>
<p><img src="intro_files/figure-html/gravanom-1.png" width="700"></p>
<p>The Quantarctica project maintainers have gone to quite a lot of effort to create nice visual representations of the data layers, by defining colour palettes and similar. The full range of visual information is not yet available through quantarcticR, but it is a work in progress. In this case, there is a colour palette for the gravity anomaly layer:</p>
<div class="sourceCode" id="cb12"><html><body><pre class="r"><span class="no">cmap</span> <span class="kw">&lt;-</span> <span class="no">ga_info</span>$<span class="no">palette</span><span class="kw">[[</span><span class="fl">1</span>]]
<span class="no">cmap</span></pre></body></html></div>
<pre><code>##        alpha  value      label   color
## item     255 -75.00   -75 mGal #9a0079
## item1    255 -67.50 -67.5 mGal #0041ff
## item2    255 -60.00   -60 mGal #398fff
## item3    255 -52.50 -52.5 mGal #66ccff
## item4    255 -45.10   -45 mGal #4ab4ab
## item5    255 -37.50 -37.5 mGal #35a16b
## item6    255 -29.90   -30 mGal #5ab157
## item7    255 -22.50 -22.5 mGal #89c53d
## item8    255 -15.00   -15 mGal #add529
## item9    255  -7.57  -7.5 mGal #d5e614
## item10   255   0.00     0 mGal #faf500
## item11   255   7.57   7.5 mGal #fbd900
## item12   255  15.00    15 mGal #fcb500
## item13   255  22.50  22.5 mGal #fd9400
## item14   255  29.90    30 mGal #fd7a00
## item15   255  37.50  37.5 mGal #ff4d00
## item16   255  45.00    45 mGal #ff2800
## item17   255  52.50  52.5 mGal #d52b00
## item18   255  60.00    60 mGal #9d2f00
## item19   255  67.50  67.5 mGal #663300
## item20   255  75.00    75 mGal #663300</code></pre>
<p>We need to make some tweaks to the palette to cope with the differences in how QGIS defines them compared to how <code>raster</code> expects them (we will endeavour to automatically deal with such differences in future versions of quantarcticR):</p>
<div class="sourceCode" id="cb14"><html><body><pre class="r"><span class="no">breaks</span> <span class="kw">&lt;-</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html">c</a></span>(<span class="no">cmap</span>$<span class="no">value</span>, <span class="fu"><a href="https://rdrr.io/pkg/raster/man/cellStats.html">cellStats</a></span>(<span class="no">ga_data</span>, <span class="st">"max"</span>))
<span class="no">breaks</span>[<span class="fl">1</span>] <span class="kw">&lt;-</span> <span class="fu"><a href="https://rdrr.io/pkg/raster/man/cellStats.html">cellStats</a></span>(<span class="no">ga_data</span>, <span class="st">"min"</span>)</pre></body></html></div>
<p>Re-plot using that colour map, and with a land layer underneath:</p>
<div class="sourceCode" id="cb15"><html><body><pre class="r"><span class="no">basemap</span> <span class="kw">&lt;-</span> <span class="fu"><a href="../reference/qa_get.html">qa_get</a></span>(<span class="st">"ADD Simple basemap"</span>)
<span class="fu"><a href="https://rdrr.io/pkg/raster/man/plot.html">plot</a></span>(<span class="no">basemap</span>)
<span class="fu"><a href="https://rdrr.io/pkg/raster/man/plot.html">plot</a></span>(<span class="no">ga_data</span>, <span class="kw">breaks</span> <span class="kw">=</span> <span class="no">breaks</span>, <span class="kw">col</span> <span class="kw">=</span> <span class="no">cmap</span>$<span class="no">color</span>, <span class="kw">add</span> <span class="kw">=</span> <span class="fl">TRUE</span>, <span class="kw">legend</span> <span class="kw">=</span> <span class="fl">FALSE</span>)</pre></body></html></div>
<p><img src="intro_files/figure-html/gravanom_with_palette-1.png" width="700"></p>
<p>which is a little closer to the Quantarctica-rendered version of the same data layer:</p>
<p><img src="phys_antgg.png"></p>
</div>
<div id="using-datasets-with-sf" class="section level1">
<h1 class="hasAnchor">
<a href="#using-datasets-with-sf" class="anchor"></a>Using datasets with sf</h1>
<p>Read in the simple basemap “ADD Simple basemap” data as an sf object and use the ggplot2 and sf packages to create a plot.</p>
<div class="sourceCode" id="cb16"><html><body><pre class="r"><span class="fu"><a href="https://rdrr.io/r/base/library.html">library</a></span>(<span class="no">sf</span>)
<span class="fu"><a href="https://rdrr.io/r/base/library.html">library</a></span>(<span class="no">ggplot2</span>)

<span class="no">surface_sf</span> <span class="kw">&lt;-</span> <span class="fu"><a href="../reference/qa_get.html">qa_get</a></span>(<span class="st">"ADD Simple basemap"</span>, <span class="kw">shapefile_reader</span> <span class="kw">=</span> <span class="kw pkg">sf</span><span class="kw ns">::</span><span class="no"><a href="https://rdrr.io/pkg/sf/man/st_read.html">st_read</a></span>)</pre></body></html></div>
<pre><code>## Reading layer `ADD_DerivedLowresBasemap' from data source `C:\data\Quantarctica3\Miscellaneous\SimpleBasemap\ADD_DerivedLowresBasemap.shp' using driver `ESRI Shapefile'
## Simple feature collection with 1338 features and 1 field
## geometry type:  MULTIPOLYGON
## dimension:      XY
## bbox:           xmin: -5791904 ymin: -5791904 xmax: 5791904 ymax: 5791904
## projected CRS:  WGS 84 / Antarctic Polar Stereographic</code></pre>
<div class="sourceCode" id="cb18"><html><body><pre class="r"><span class="fu"><a href="https://rdrr.io/r/base/class.html">class</a></span>(<span class="no">surface_sf</span>)</pre></body></html></div>
<pre><code>## [1] "sf"         "data.frame"</code></pre>
<div class="sourceCode" id="cb20"><html><body><pre class="r"><span class="fu"><a href="https://ggplot2.tidyverse.org/reference/ggplot.html">ggplot</a></span>(<span class="no">surface_sf</span>) + <span class="fu"><a href="https://ggplot2.tidyverse.org/reference/ggsf.html">geom_sf</a></span>()</pre></body></html></div>
<p><img src="intro_files/figure-html/sfplot-1.png" width="700"></p>
</div>
  </div>

  <div class="col-md-3 hidden-xs hidden-sm" id="pkgdown-sidebar">

        <nav id="toc" data-toggle="toc"><h2 data-toc-skip>Contents</h2>
    </nav>
</div>

</div>



      <footer><div class="copyright">
  <p>Developed by Kim Fitter, Charlène Guillaumot, David Ranzolin, Marc Desgroseilliers, Ben Raymond.</p>
</div>

<div class="pkgdown">
  <p>Site built with <a href="https://pkgdown.r-lib.org/">pkgdown</a> 1.5.1.</p>
</div>

      </footer>
</div>

  


  </body>
</html>
